(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{459:function(t,e,s){"use strict";s.r(e);var l=s(13),n=s.n(l),a=s(6),i=s.n(a),o=s(8),r=s.n(o),c=s(11),u=s.n(c),d=s(14),m=s(7),f=Object(m.a)(Object(m.b)("lessons/list")),v=s(2),p=s.n(v),h=s(0),_=s.n(h),b=s(4);var C,g,w={methods:{deleteModel:(C=_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.delete("lessons/".concat(this.params.data.id));case 2:this.params.api.purgeServerSideCache([]);case 3:case"end":return t.stop()}}),t,this)})),g=function(){var t=this,e=arguments;return new p.a((function(s,l){var n=C.apply(t,e);function a(t,e){try{var a=n[t](e),r=a.value}catch(t){return void l(t)}a.done?s(r):p.a.resolve(r).then(i,o)}function i(t){a("next",t)}function o(t){a("throw",t)}i()}))},function(){return g.apply(this,arguments)})}},$=s(1),x=Object($.a)(w,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("vs-button",{staticClass:"mr-4",attrs:{to:{name:"lessons.edit",params:{id:t.params.data.id}},color:"primary",type:"filled"}},[t._v("\n        "+t._s(t.$t("general.edit"))+"\n    ")]),t._v(" "),s("vs-button",{staticClass:"mr-4",attrs:{to:{name:"comments.list",query:{model_id:t.params.data.id,model_type:"lesson"}},color:"success",type:"filled"}},[t._v("\n        "+t._s(t.$t("general.comments"))+"\n    ")]),t._v(" "),s("vs-button",{attrs:{color:"danger",type:"filled"},on:{click:t.deleteModel}},[t._v("\n        "+t._s(t.$t("general.delete"))+"\n    ")])],1)}),[],!1,null,"2a5fd32e",null).exports,F=s(12);function y(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},l=r()(s);"function"==typeof i.a&&(l=l.concat(i()(s).filter((function(t){return n()(s,t).enumerable})))),l.forEach((function(e){k(t,e,s[e])}))}return t}function k(t,e,s){return e in t?u()(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var O={components:{AgTable:d.a,tableActionColumnCell:x},data:function(){return{filters:!1,agFilters:{name:null,course:null},agOptions:{dataSource:f}}},mounted:function(){this.agFilters.course=this.$route.query.course_id||null,this.loadCourses()},computed:y({},Object(F.c)({getCourses:"Courses/getCourses"}),{activeUserInfo:function(){return this.$store.getters["Authentication/getProfile"]},agColumns:function(){return[{headerName:this.$t("lessons.list.column_name"),field:"label",minWidth:170,sortable:!0},{headerName:this.$t("lessons.list.column_course"),field:"course.name",minWidth:170},{headerName:this.$t("lessons.list.column_total_students"),field:"total_students",minWidth:170},{headerName:this.$t("lessons.list.column_passed"),field:"passed_students",minWidth:170},{headerName:this.$t("lessons.list.column_actions"),minWidth:350,cellRendererFramework:"tableActionColumnCell"}]}}),methods:y({},Object(F.b)({loadCourses:"Courses/loadCourses"}),{showFilters:function(){this.filters=!this.filters},applyFilters:function(){this.$refs.allLessonsTable.applyFilters()}})},j=Object($.a)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"router-header flex flex-wrap items-center mb-6"},[s("div",{staticClass:"content-area__heading"},[s("h2",{staticClass:"mb-1"},[t._v(t._s(t.$t("lessons.title")))])]),t._v(" "),t.activeUserInfo.upload_lessons||t.$hasRole("admin")?s("vx-tooltip",{staticClass:"ml-auto md:block hidden cursor-pointer",attrs:{position:"right",text:t.$t("lessons.create_lesson_tooltip")}},[s("vs-button",{attrs:{size:"large",icon:"icon-settings","icon-pack":"feather",to:{name:"lessons.create"}}})],1):t._e()],1),t._v(" "),s("vx-card",{attrs:{title:t.$t("lessons.all_lessons")}},[s("template",{slot:"actions"},[s("vx-tooltip",{staticClass:"ml-auto md:block hidden cursor-pointer",attrs:{position:"right",text:t.$t("lessons.filter.tooltip")}},[s("vs-button",{attrs:{icon:"icon-settings","icon-pack":"feather"},on:{click:t.showFilters}})],1)],1),t._v(" "),t.filters?s("div",{staticClass:"mb-5"},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full md:w-1/3 mb-5"},[s("div",{staticClass:"vx-col w-full"},[s("span",[t._v(t._s(t.$t("lessons.filter.name")))])]),t._v(" "),s("div",{staticClass:"vx-col w-full"},[s("vs-input",{staticClass:"w-full",model:{value:t.agFilters.name,callback:function(e){t.$set(t.agFilters,"name",e)},expression:"agFilters.name"}})],1)]),t._v(" "),s("div",{staticClass:"vx-col w-full md:w-1/3 mb-5"},[s("div",{staticClass:"vx-col w-full"},[s("span",[t._v(t._s(t.$t("lessons.filter.course")))])]),t._v(" "),s("div",{staticClass:"vx-col w-full"},[s("v-select",{staticClass:"w-full",attrs:{label:"name",reduce:function(t){return t.id},options:t.getCourses},model:{value:t.agFilters.course,callback:function(e){t.$set(t.agFilters,"course",e)},expression:"agFilters.course"}})],1)]),t._v(" "),s("div",{staticClass:"vx-col w-1/3"},[s("vs-button",{staticClass:"mr-3 mt-5",on:{click:t.applyFilters}},[t._v(t._s(t.$t("lessons.filter.title")))])],1)])]):t._e(),t._v(" "),s("ag-table",{ref:"allLessonsTable",attrs:{filters:t.agFilters,columns:t.agColumns,options:t.agOptions}})],2)],1)}),[],!1,null,"7f2556d4",null);e.default=j.exports}}]);