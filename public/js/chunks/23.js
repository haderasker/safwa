(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{105:function(t,n,i){var e=i(224);"string"==typeof e&&(e=[[t.i,e,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(8)(e,o);e.locals&&(t.exports=e.locals)},223:function(t,n,i){"use strict";i(105)},224:function(t,n,i){(t.exports=i(7)(!1)).push([t.i,".notifications-page[data-v-63d0e5e0] .vs-textarea{height:200px}",""])},515:function(t,n,i){"use strict";i.r(n);var e=i(49),o=i.n(e),s=i(50),a=i.n(s),c=i(2),r=i.n(c),l=i(0),u=i.n(l),p=(i(212),i(214),i(216),i(4));function f(t){return function(t){if(Array.isArray(t)){for(var n=0,i=new Array(t.length);n<t.length;n++)i[n]=t[n];return i}}(t)||function(t){if(a()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return o()(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(t){return function(){var n=this,i=arguments;return new r.a((function(e,o){var s=t.apply(n,i);function a(t,n){try{var i=s[t](n),a=i.value}catch(t){return void o(t)}i.done?e(a):r.a.resolve(a).then(c,l)}function c(t){a("next",t)}function l(t){a("throw",t)}c()}))}}var d,h,g={components:{quillEditor:i(113).quillEditor},data:function(){return{activePopup:!1,content:"",title:"",categoryOption:null,categoryContentOption:null,categoryContentOptions:[],type:"notification",editorOption:{}}},computed:{pageTitle:function(){return this.$t("notifications.title")},categoryOptions:function(){var t=[];return this.$hasRole("admin")&&t.push({id:"teachers",title:this.$t("notifications.teachers")}),t.concat([{id:"levels",title:this.$t("notifications.levels")},{id:"students",title:this.$t("notifications.students")}])}},watch:{categoryOption:function(t){this.getCategoryContent(t),this.categoryContentOption=null}},mounted:function(){this.getCategoryContent({id:"teachers"})},methods:{getCategoryContent:(h=v(u.a.mark((function t(n){var i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,p.a.post("".concat(n.id,"/list"),{per_page:9999999});case 4:i=t.sent,this.categoryContentOptions=[{id:-1,name:this.$t("notifications.all")}].concat(f(i.data.data));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)}),sendNotification:(d=v(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.$vs.loading(),t.prev=1,t.next=4,p.a.post("notifications",{content:this.content,group:this.categoryOption.id,member:this.categoryContentOption.id,type:this.type,title:this.title});case 4:this.$vs.loading.close(),this.successMessage({title:this.$t("notifications.success_title"),message:this.$t("notifications.success_message")}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),this.$vs.loading.close(),this.failMessage({title:this.$t("notifications.failed_title"),message:this.$t("notifications.failed_message")});case 12:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return d.apply(this,arguments)})}},y=(i(223),i(1)),_=Object(y.a)(g,(function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("vx-card",{staticClass:"notifications-page",attrs:{title:t.pageTitle}},[i("div",{staticClass:"inline-block w-full mr-6 lg:w-1/3"},[i("h6",[t._v(t._s(t.$t("notifications.select_category")))]),t._v(" "),i("v-select",{attrs:{label:"title",options:t.categoryOptions},model:{value:t.categoryOption,callback:function(n){t.categoryOption=n},expression:"categoryOption"}})],1),t._v(" "),i("div",{staticClass:"inline-block w-full lg:w-1/3"},[i("h6",[t._v(t._s(t.$t("notifications.select_one")))]),t._v(" "),i("v-select",{attrs:{label:"name",options:t.categoryContentOptions},model:{value:t.categoryContentOption,callback:function(n){t.categoryContentOption=n},expression:"categoryContentOption"}})],1),t._v(" "),i("div",{staticClass:"inline-block w-full lg:w-1/3"},[i("h6",[t._v(t._s(t.$t("notifications.type_title")))]),t._v(" "),i("div",{staticClass:"mt-4"},[i("vs-radio",{staticClass:"mr-4",attrs:{"vs-value":"notification"},model:{value:t.type,callback:function(n){t.type=n},expression:"type"}},[t._v("\n                    "+t._s(t.$t("notifications.type_notification"))+"\n                ")]),t._v(" "),i("vs-radio",{staticClass:"mr-4",attrs:{"vs-value":"email"},model:{value:t.type,callback:function(n){t.type=n},expression:"type"}},[t._v("\n                    "+t._s(t.$t("notifications.type_email"))+"\n                ")])],1)]),t._v(" "),i("div",{staticClass:"w-full mt-6"},[i("h6",[t._v(t._s(t.$t("notifications.notification_title")))]),t._v(" "),i("vs-input",{staticClass:"w-full",model:{value:t.title,callback:function(n){t.title=n},expression:"title"}})],1),t._v(" "),i("div",{staticClass:"w-full mt-6"},[i("h6",[t._v(t._s(t.$t("notifications.content")))]),t._v(" "),i("quill-editor",{attrs:{options:t.editorOption},model:{value:t.content,callback:function(n){t.content=n},expression:"content"}})],1),t._v(" "),i("vs-button",{staticClass:"mr-4",on:{click:t.sendNotification}},[t._v(t._s(t.$t("notifications.send")))])],1)],1)}),[],!1,null,"63d0e5e0",null);n.default=_.exports}}]);